<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/css/new/bootstrap.min.css">
</head>
<body>
<nav class="navbar navbar-expand bg-body-tertiary justify-content-center row-cols-auto">
    <div class="col-10 row row-cols-auto justify-content-between">
        <div class="nav align-self-center ms-3 ">
            HELLO JAVA!
        </div>
        <div class="container  row row-cols-auto">
            <div class="nav align-self-center">
                멤버리스트
            </div>
            <div class="nav" id="login">
                <a class="btn btn-primary" href="Login.html" type="submit" role="button">마이페이지</a>
            </div>
            <div class="nav" id="logout">
                <a class="btn btn-primary" href="Login.html" type="submit" role="button">로그아웃</a>
            </div>
        </div>
    </div>
</nav>
<form class="container" id="postingForm" th:action="@{/post}" th:object="${postForm}" method="post" novalidate>
    <div class="row justify-content-center">
        <div class="col-6 row row-cols-auto mt-5 mb-5">
            <h3>글쓰기</h3>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="mb-3 col-6">
            <div class="form-floating">
                <input type="text" class="form-control"  th:field="*{nickname}" id="nickName" placeholder="닉네임을 입력하세요">
                <label for="nickName">닉네임</label>
                <div class="invalid-feedback">
                    공란일 수 없다.
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="mb-3 col-6">
            <div class="form-floating">
                <input type="text" class="form-control"  th:field="*{title}" id="title" placeholder="글의 제목을 입력하세요">
                <label for="title">제목</label>
                <div class="invalid-feedback">
                    공란일 수 없다.
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="mb-3 col-6 ">
            <div class="form-floating">
                <textarea class="form-control" id="textContent" th:field="*{textContent}" placeholder="글의 내용을 입력하세요"
                          style="height: 500px;resize: none"></textarea>
                <label for="textContent">내용</label>
                <div class="invalid-feedback">
                    3글자 이상 1000 글자 이하여야 한다
                </div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center col">
        <div class="col-6 mb-3 row row-cols-auto justify-content-end">
            <div class="col">
                <button class="btn btn-primary" type="submit" role="button">작성완료</button>
            </div>
        </div>
    </div>
</form>

<footer class="container-fluid mt-auto bg-light py-3">

</footer>
</body>
<script>
    function validationPostingTitle() {
        const postingTitle = document.querySelector("#postingTitle");
        if (!postingTitle.checkValidity() || postingTitle.value < 3) {
            postingTitle.className = 'form-control is-invalid';
            return false;
        }
        postingTitle.className = 'form-control is-valid';
        return true;
    }

    function validationPostingBody() {
        const postingBody = document.querySelector("#postingBody");
        if (!postingBody.checkValidity() || postingBody.value.length < 3 || postingBody.value.length > 1000) {
            postingBody.className = 'form-control is-invalid';
            return false;
        }
        postingBody.className = 'form-control is-valid';
        return true;
    }


    function validationPostingForm(event) {

        let isValidatePostingBody = validationPostingBody();
        let isValidatePostingTitle = validationPostingTitle();

        if (!isValidatePostingBody || !isValidatePostingTitle) {
            event.preventDefault();
            event.stopPropagation();
        }
    }

    const form = document.querySelector("#postingForm");
    form.addEventListener('submit', validationPostingForm, false);
</script>

</html>
